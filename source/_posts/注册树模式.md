---
title: 注册树模式
date: 2017-11-05 19:38:16
tags: 设计模式
---

# 干啥用的?

直接获取1个已经创建好的对象

正常情况下，我们现在获取对象的方法主要有2种：

new 实例化
访问静态方法

# 创建1个注册类(Think\Register.php)

```php
namespace Think;

class Register
{
    protected static $obj = [];

    public static function set($alias, $object)
    {
        self::$obj[$alias] = $object;
    }

    //销毁对象
    public static function _unset($alias)
    {
        unset(self::$obj[$alias]);
    }

    //得到
    public static function get($alias)
    {
        return self::$obj[$alias];
    }
}
```

# 改造工厂类

```php
class Factory
{
    static function createDatabase()
    {
       $db = Database::getInstance();

       Register::set('db666',$db);
       //销毁对象
	   //Register::_unset('db666');
       return $db;
    }
}
```

# 入口文件调用(index.php)

```php
// 入口文件
define('BASEDIR', __DIR__);
include BASEDIR . '/Think/Loder.php';
spl_autoload_register('\\Think\\Loder::autoload');

//工厂模式实例化对象，并注册
 $obj = Think\Factory::createDatabase();

//注册后,获取该对象
$db666 = Think\Register::get('db666');

var_dump($obj === $db666);
```