---
title: 磁盘分区概念及管理工具
date: 2018-10-19 11:01:24
tags: Linux
category: Linux
---

# 分区概念
## 主分区和活动分区
1. 主分区也被称为主磁盘分区，是磁盘分区的一中类型，其主要作用是用来安装操作系统。一个硬盘最多可创建4个主分区(MBR)。活动分区是基于主分区的
2. 活动分区是基于主分区的，磁盘分区中的任意主分区都可以设置为活动分区。
3. 如果电脑上4个主分区都安装了不同的系统，那被标记为活动分区的主分区将用于初始引导，即启动活动分区内安装的系统(一般都是c盘安装系统)

## 逻辑分区和扩展分区
1. 因为主分区最多可以创建4个，我们需要使用扩展分区打破4的限制。(MBR情况)
2. 在磁盘上可以创建多个逻辑分区而创建的这些逻辑分区都被称为扩展分区，您可以用主分区和逻辑分区中储存数据，但是不能用扩展分区储存，因为扩展分区是我们对逻辑分区的总称，只是一中称呼。
3. 可以这么理解除了主分区剩下都是扩展分区,扩展分区可以划为d,e,f,g盘,这些都是逻辑分区.

# MBR和GPT
 全新硬盘（未初始化）装系统之前，必须对齐进行分区，硬盘分区初始化的格式包括MBR和GPT两种。
GPT（GUID Partition Table）分区
MBR（Master Boot Record）分区
## MBR(Master Boot Record主引导记录)
MBR(Master Boot Record):主引导分区，为一个编号为0的512字节的扇区

之所以叫“主引导记录”，是因为它是存在于驱动器开始部分的一个特殊的启动扇区。这个扇区包含了已安装的操作系统的启动加载器和驱动器的逻辑分区信息。

	  446bytes：`bootloader`,引导加载器程序，主引导记录，引导启动操作系统的程序；

      64bytes：分区表，每16bytes标识一个分区，一共只能有4个分区；

      2bytes：表示MBA是否有效；55AA为有效；
	  
注意：

1) 主分区最多四个，扩展分区只能一个

2) 扩展分区不能单独使用，要继续分成逻辑分区，逻辑分区可以由多个

3) 一个分区就是一个独立的文件系统

4) 主分区和扩展分区的标识：1-4；逻辑分区：5+

5)   在MBR分区表中，一个分区最大的容量为2T，且每个分区的起始柱面必须在这个disk的前2T内。你有一个3T的硬盘，根据要求你至少要把它划分为2个分区，且最后一个分区的起始扇区要位于硬盘的前2T空间内。如果硬盘太大则必须改用GPT。

## GPT(目前电脑使用)
全局唯一标识分区表（GUID Partition Table，缩写：GPT）是一个实体硬盘的分区结构
GPT分区表：GPT，全局唯一标识分区表(GUID Partition Table)，与MBR最大4个分区表项的限制相比，GPT对分区数量没有限制，但Windows最大仅支持128个GPT分区，GPT可管理硬盘大小达到了18EB。只有基于UEFI平台的主板才支持GPT分区引导启动。
       GPT分区表下的隐藏分区：
       ①. ESP分区：EFI system partition，该分区用于采用了EFI BIOS的电脑系统，用来启动操作系统。分区内存放引导管理程序、驱动程序、系统维护工具等。如果电脑采用了EFI系统，或当前磁盘用于在EFI平台上启动操作系统，则应建议ESP分区。
       ②. MSR分区：即微软保留分区，是GPT磁盘上用于保留空间以备用的分区，例如在将磁盘转换为动态磁盘时需要使用这些分区空间。

# Linux工具(fdisk)

## fdisk
fdisk：

    创建查看分区

      (1)查看磁盘的分区信息：

命令使用格式：fdisk -l [-u] [device...]：列出指定磁盘设备上的分区情况；

      (2)管理分区

命令使用格式：fdisk /dev/sd# ：创建，删除，保存磁盘分区配置。

fdisk提供了一个交互式接口来管理分区，它有许多子命令，分别用于不同的管理功能；所有的操作均在内存中完成，没有直接同步到磁盘；直到使用w命令保存至磁盘上；

以下命令选项为m中的常用选项：

              n：创建新分区        d：删除已有分区

              t：修改分区类型      l：查看所有已经ID

              w：保存并退出        q：不保存并退出

              m：查看帮助信息      p：显示现有分区信息
			  
			  
新加硬盘示例:
```
sudo fdisk /dev/sdb   # 打开新的硬盘

输入 p 查看新硬盘分区
新建分区 输入n
选择主分区或者扩展分区
记得 w 保存(三思)
mkfs -t ext4 /dev/sdb1 命令进行对sdb1格式化
/data 目录挂载
mkdir /data
mount /dev/sdb1 /data 
```
	  



